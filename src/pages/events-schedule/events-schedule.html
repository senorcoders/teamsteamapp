<ion-header color="base">

  <ion-navbar color="base">
    <button ion-button icon-only menuToggle start>
        <ion-icon name="menu"></ion-icon>
    </button>

    <ion-title> {{ 'EVENTS.TITLE' | translate }} </ion-title>

  </ion-navbar>

</ion-header>


<ion-content>
  <div ion-fixed id="select-by">
    <button color="pdark" ion-button [ngClass]="by == 'past' ? 'select' : ''" class="select-by" (click)="byS('past')">
        <pre>{{ 'EVENTS.PAST' | translate }}</pre>
        <ion-icon [hidden]="by == 'upcoming'" name="md-arrow-dropdown"></ion-icon>
    </button>
    <button ion-button color="pdark" [ngClass]="by == 'upcoming' ? 'select' : ''" class="select-by" (click)="byS('upcoming')">
        <pre>{{ 'EVENTS.UPCOMING' | translate }}</pre>
        <ion-icon [hidden]="by == 'past'" name="md-arrow-dropdown"></ion-icon>
    </button>
  </div>

  <ion-card *ngFor="let e of events" [ngClass]="e.type">

    <!--ion-card-content (click)="goEvent(e)" >
        <ion-card-title>{{e.name}}</ion-card-title>
    </ion-card-content-->
    
    <div class="inner-image">
      <img (click)="goEvent(e)" [src]="e.imageSrc">
      <div class="dateTimeEvent">
        <h3 class="date-event" [hidden]="e.repeatsDaily" >{{e.parsedDateTime[0]}}</h3>
        <h4 class="date-event" [hidden]="e.repeatsDaily" >{{e.parsedDateTime[1]}}</h4>
        <h4 class="date-event" [hidden]="!e.repeatsDaily"  >{{"DAILY" | translate}}</h4>
      </div>
    </div>

    <!-- este es para events type -->
    <ion-card-content>
      <p class="text-event" (click)="goEvent(e)">
        {{e.name}}
      </p>
      <!--p [hidden]="e.repeatsDaily" style="text-align: right;">{{e.parsedDateTime}}</p-->
      <p [hidden]="!e.repeatsDaily" class="text-event" style="text-align: right;">{{e.description}} </p>
      
      <div class="divider"> </div>
      <ion-row>
          <ion-col col-2>
            <button ion-button (click)="asingResponse(e, 'yes')" color="plight" [ngClass]="{'select': e.likeUp }" icon-left clear small>
              <ion-icon class="ball mas"></ion-icon>
              <div class="text-inner-button text-event">{{e.countYes}}</div>
            </button>
          </ion-col>
          <ion-col col-2>
            <button ion-button (click)="asingResponse(e, 'no')" color="plight" [ngClass]="{'select': e.likeDown }" icon-left clear small>
                <ion-icon class="ball menos"></ion-icon>
              <div class="text-inner-button text-event">{{e.countNo}}</div>
            </button>
          </ion-col>
          <ion-col col-2>
            <button ion-button (click)="asingResponse(e, 'maybe')" color="plight" [ngClass]="{'select': e.likeDown }" icon-left clear small>
              <ion-icon class="ball talves"></ion-icon>
              <div class="text-inner-button text-event">{{e.countMaybe}}</div>
            </button>
          </ion-col>
          <ion-col col-6>
            <button ion-button (click)="viewComment(e)" icon-left>
              <ion-icon name="text"></ion-icon>
              <div class="text-event" >{{e.comments.length}} Comments</div>
            </button>
          </ion-col>
        </ion-row>
      <!--ion-row>
        <ion-col col-3>
          <button ion-button (click)="like(e, true)" color="plight" [ngClass]="{'select': e.likeUp }" icon-left clear small>
            <ion-icon name="thumbs-up"></ion-icon>
            <div>{{e.likesUp}}</div>
          </button>
        </ion-col>
        <ion-col col-3>
            <button ion-button (click)="like(e, false)" color="plight" [ngClass]="{'select': e.likeDown }" icon-left clear small>
              <ion-icon name="thumbs-down"></ion-icon>
              <div>{{e.likesDown}}</div>
            </button>
          </ion-col>
        <ion-col col-6>
          <button ion-button (click)="viewTraking(e)" icon-left>
            <ion-icon name="text"></ion-icon>
            <div>{{e.comments.length}} Comments</div>
          </button>
        </ion-col>
      </ion-row-->
    </ion-card-content>

    <!-- este es para events type practice and game -->
    <div class="dateTime" (click)="goEvent(e)" >
        <h3 class="date-event" [hidden]="e.repeatsDaily" >{{e.parsedDateTime[0]}}</h3>
        <h4 class="date-event" [hidden]="e.repeatsDaily" >{{e.parsedDateTime[1]}}</h4>
        <h4 class="date-event" [hidden]="!e.repeatsDaily" >{{"DAILY" | translate}}</h4>
    </div>

    <div class="details" (click)="goEvent(e)">
      <h2 class="text-event">{{e.name}}</h2>
      <p class="text-event">{{e.description}}</p>
    </div>

      <ion-row class="asistencia">
        <ion-col col-2>
          <button ion-button (click)="asingResponse(e, 'yes')" color="plight" [ngClass]="{'select': e.likeUp }" icon-left clear small>
            <ion-icon class="ball mas"></ion-icon>
            <div class="text-inner-button text-event">{{e.countYes}}</div>
          </button>
        </ion-col>
        <ion-col col-2>
          <button ion-button (click)="asingResponse(e, 'no')" color="plight" [ngClass]="{'select': e.likeDown }" icon-left clear small>
              <ion-icon class="ball menos"></ion-icon>
            <div class="text-inner-button text-event">{{e.countNo}}</div>
          </button>
        </ion-col>
        <ion-col col-2>
          <button ion-button (click)="asingResponse(e, 'maybe')" color="plight" [ngClass]="{'select': e.likeDown }" icon-left clear small>
            <ion-icon class="ball talves"></ion-icon>
            <div class="text-inner-button text-event">{{e.countMaybe}}</div>
          </button>
        </ion-col>
        <ion-col col-6>
          <button ion-button (click)="viewComment(e)" icon-left>
            <ion-icon name="text"></ion-icon>
            <div class="text-event">{{e.comments.length}} Comments</div>
          </button>
        </ion-col>
      </ion-row>

  </ion-card>

  <ion-fab bottom right [hidden]='user.role.name != "Manager"' >
    <button color="base" ion-fab icon-only (click)="addEvent()" >
      <ion-icon name="md-add"></ion-icon>
    </button>
  </ion-fab>

</ion-content>
